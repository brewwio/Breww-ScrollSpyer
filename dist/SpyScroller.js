!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define("SpyScroller",[],o):"object"==typeof exports?exports.SpyScroller=o():t.SpyScroller=o()}(this,(()=>(()=>{"use strict";var t,o={d:(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t,o){return null!=o&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?!!o[Symbol.hasInstance](t):t instanceof o}o.r(e),o.d(e,{ErrorMessages:()=>t,SpyScroller:()=>i}),function(t){t.INVALID_NUMBER="Number must be greater then 1"}(t||(t={}));var i=function(){var t=function(t,o){var e,i,r,s,c,l,u;if(void 0===t&&(t="#navMain"),void 0===o&&(o={}),this.isLastSection=!1,!t)throw new Error("First argument cannot be empty");if("string"!=typeof t&&!n(t,HTMLElement))throw new TypeError("menu can be either string or an instance of HTMLElement");if("object"!=typeof o)throw new TypeError("options can only be of type object");if(this.menuList=n(t,HTMLElement)?t:document.querySelector(t),!this.menuList)throw new Error('No menu element found for selector "'.concat(t,'"'));this.options={sectionSelector:null!==(e=o.sectionSelector)&&void 0!==e?e:"section",targetSelector:null!==(i=o.targetSelector)&&void 0!==i?i:"a",topOffset:null!==(r=o.topOffset)&&void 0!==r?r:0,hrefAttribute:null!==(s=o.hrefAttribute)&&void 0!==s?s:"href",activeClass:Array.isArray(o.activeClass)?o.activeClass:["active"],onActive:null!==(c=o.onActive)&&void 0!==c?c:null,onLastScrollInView:null!==(l=o.onLastScrollInView)&&void 0!==l?l:null,onFirstScrollInView:null!==(u=o.onFirstScrollInView)&&void 0!==u?u:null},this.sections=document.querySelectorAll(this.options.sectionSelector),this.onSectionScroll=this.onSectionScroll.bind(this),this.boundOnScroll=this.onScroll.bind(this),window.addEventListener("scroll",this.boundOnScroll)};return t.prototype.getCurrentSection=function(){for(var t=0;t<this.sections.length;t++){var o=this.sections[t],e=o.offsetTop,n=e+o.offsetHeight,i=(document.documentElement.scrollTop||document.body.scrollTop)+this.options.topOffset;if(i>=e&&i<n)return o}},t.prototype.onSectionScroll=function(){var t=window.innerHeight,o=window.scrollY||window.pageYOffset||document.body.scrollTop+(document.documentElement&&document.documentElement.scrollTop||0);this.sections.forEach((function(e){var n=e.offsetTop,i=e.offsetHeight,r=t/2-(n+i/2-o),s=t/2+i/2,c=1;r>s?c=0:r>0&&(c=1-r/s),e.style.opacity="".concat(c)}))},t.prototype.getCurrentMenuItem=function(t){if(t){var o=t.getAttribute("id");return this.menuList.querySelector("[".concat(this.options.hrefAttribute,'="#').concat(o,'"]'))}},t.prototype.setActive=function(t,o){var e;this.options.activeClass.some((function(o){return t.classList.contains(o)}))||((e=t.classList).add.apply(e,this.options.activeClass),this.options.onActive&&this.options.onActive(t,o))},t.prototype.removeCurrentActive=function(t){var o,e=this;void 0===t&&(t={ignore:null});var n=this.options,i=n.hrefAttribute,r=n.targetSelector;this.menuList.querySelectorAll("".concat(r,":not([").concat(i,'="').concat(null===(o=t.ignore)||void 0===o?void 0:o.getAttribute(i),'"])')).forEach((function(t){var o;return(o=t.classList).remove.apply(o,e.options.activeClass)}))},t.prototype.onScroll=function(){var t=this.getCurrentSection(),o=this.getCurrentMenuItem(t);if(o&&(this.removeCurrentActive({ignore:o}),this.setActive(o,t)),this.options.onLastScrollInView){var e=this.sections[this.sections.length-1],n=(r=e.offsetTop)+e.offsetHeight,i=(s=(document.documentElement.scrollTop||document.body.scrollTop)+this.options.topOffset)>=r&&s<n;i&&!this.isLastSection?(this.isLastSection=!0,this.options.onLastScrollInView&&this.options.onLastScrollInView()):!i&&this.isLastSection&&(this.isLastSection=!1)}if(this.options.onFirstScrollInView){var r,s,c=this.sections[0];n=(r=c.offsetTop)+c.offsetHeight,(s=(document.documentElement.scrollTop||document.body.scrollTop)+this.options.topOffset)>=r&&s<n&&this.options.onFirstScrollInView()}},t.prototype.bind=function(){window.addEventListener("scroll",this.boundOnScroll)},t.prototype.unbind=function(){window.removeEventListener("scroll",this.boundOnScroll)},t}();return e})()));